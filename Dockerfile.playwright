

ARG PLAYWRIGHT_VERSION
FROM mcr.microsoft.com/playwright:v${PLAYWRIGHT_VERSION}-focal

ADD playwright/package.json playwright/package.json
ADD playwright/package-lock.json playwright/package-lock.json

ENV RUN_LOCAL_TESTS_IN_UI_MODE $RUN_LOCAL_TESTS_IN_UI_MODE

RUN cd playwright && npm ci && cd ..

ADD . .

ENTRYPOINT ["./run_playwright_tests_in_container.sh"]
